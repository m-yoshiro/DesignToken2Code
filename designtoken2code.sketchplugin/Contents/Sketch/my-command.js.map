{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/config.js","webpack://exports/./src/core/color.js","webpack://exports/./src/core/design-tokens.js","webpack://exports/./src/core/token.js","webpack://exports/./src/my-command.js","webpack://exports/./src/sketch-ui/index.js","webpack://exports/./src/sketch-ui/utils.js","webpack://exports/./src/utils.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\""],"names":["module","exports","prefix","artboardName","value","hexPattern","match","short","long","undefined","Token","data","config","outputFormat","tokens","initTokens","Array","isArray","TypeError","map","element","outputData","token","toScss","join","toCss","format","Color","tokenProps","type","name","validate","color","Object","keys","forEach","key","ReferenceError","toHEX","replace","sketch","UI","escapeRegExp","DesignTokens","createDialog","openPanel","pasteBoardWrite","getTokenLayersByPattern","convertLayersToTokenData","writeToFile","CONFIG","context","document","fromNative","tokensArtboard","getLayersNamed","tokenNamePattern","RegExp","layers","length","message","tokenLayers","log","Types","Shape","tokenData","setOutputFormat","output","dialogButtons","text","action","filePath","title","buttons","Error","dialog","NSAlert","alloc","init","messageText","informativeText","button","addButtonWithTitle","response","Number","runModal","callback","panel","NSOpenPanel","canChooseDirectories","canCreateDirectories","allowsMultipleSelection","clicked","NSFileHandlingPanelOKButton","firstURL","URL","path","NSString","stringWithFormat","indexOf","substring","bind","pasteBoard","NSPasteboard","generalPasteboard","clearContents","writeObjects","showMessage","pattern","filter","elm","test","ShapePath","SymbolInstance","getSymbolMaster","layer","SymbolMaster","master","style","fills","content","file","writeToFile_atomically","string"],"mappings":"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","file":"my-command.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/my-command.js\");\n","module.exports = {\n  prefix: '$color',\n  artboardName: 'Tokens',\n}\n","module.exports = class Color {\n  constructor(value) {\n    this.value = value\n  }\n\n  toHEX() {\n    // https://gist.github.com/comficker/871d378c535854c1c460f7867a191a5a#gistcomment-2615849\n    const hexPattern = /^#?(?:([0-9a-f]{3})|([0-9a-f]{6})(?:[0-9a-f]{2})?)$/i\n    const [, short, long] = this.value.match(hexPattern) || []\n\n    if (long) {\n      return `#${long}`\n    }\n\n    if (short) {\n      return `#${short}`\n    }\n\n    return undefined\n  }\n}\n","const Token = require('./token')\n\nmodule.exports = class DesignTokens {\n  constructor(\n    data,\n    config = {\n      outputFormat: 'scss',\n    }\n  ) {\n    this.tokens = []\n    this.config = config\n    this.initTokens(data)\n  }\n\n  initTokens(data) {\n    if (!Array.isArray(data)) {\n      return new TypeError('\"data must be Array\"')\n    }\n    this.tokens = data.map(element => new Token(element))\n\n    return null\n  }\n\n  set setOutputFormat(format) {\n    this.config.outputFormat = format\n  }\n\n  output() {\n    const { outputFormat } = this.config\n    let outputData\n\n    switch (outputFormat) {\n      case 'scss':\n        outputData = this.tokens.map(token => token.toScss()).join('\\n')\n        break\n      case 'css':\n        outputData = this.tokens.map(token => token.toCss()).join('\\n')\n        break\n      default:\n        break\n    }\n\n    return outputData\n  }\n}\n","const Color = require('./color')\n\nconst tokenProps = {\n  type: {\n    type: 'string',\n  },\n  name: {\n    type: 'string',\n  },\n  value: {\n    type: 'string',\n  },\n}\n\nmodule.exports = class Token {\n  constructor(data) {\n    this.data = data\n    this.validate()\n\n    if (this.data.type === 'color') {\n      this.color = new Color(this.data.value)\n    }\n  }\n\n  validate() {\n    Object.keys(tokenProps).forEach(key => {\n      if (!(key in this.data)) {\n        throw new ReferenceError(`Data must have ${key} property.`)\n      }\n\n      if (typeof this.data[key] !== 'string') {\n        throw new TypeError(`${key} must be ${tokenProps[key].type}`)\n      }\n    })\n  }\n\n  toScss() {\n    let { name, value } = this.data\n    const { type } = this.data\n\n    value = type === 'color' ? new Color(value).toHEX() : value\n    name = `$${name.replace(/^\\$?(.*)/, '$1')}`\n    return `${name}: ${value} !default;`\n  }\n\n  toCss() {\n    let { name, value } = this.data\n    const { type } = this.data\n\n    value = type === 'color' ? new Color(value).toHEX() : value\n    name = `--${name.replace(/^\\$?(.*)/, '$1')}`\n    return `${name}: ${value};`\n  }\n}\n","const sketch = require('sketch/dom')\nconst { UI } = require('sketch')\nconst { prefix, artboardName } = require('./config')\nconst { escapeRegExp } = require('./utils')\nconst DesignTokens = require('./core/design-tokens')\nconst { createDialog, openPanel } = require('./sketch-ui/index')\nconst {\n  pasteBoardWrite,\n  getTokenLayersByPattern,\n  convertLayersToTokenData,\n  writeToFile,\n} = require('./sketch-ui/utils')\n\nconst CONFIG = {\n  outputFormat: 'scss',\n}\n\nexport default function(context) {\n  const document = sketch.fromNative(context.document)\n  const tokensArtboard = document.getLayersNamed(artboardName)[0]\n  const tokenNamePattern = new RegExp(`${escapeRegExp(prefix)}`)\n\n  if (!tokensArtboard.layers.length) {\n    UI.message('Not found')\n    return\n  }\n\n  const tokenLayers = getTokenLayersByPattern(\n    tokensArtboard.layers,\n    tokenNamePattern\n  )\n\n  log(`${sketch.Types.Shape}`)\n\n  const tokenData = new DesignTokens(convertLayersToTokenData(tokenLayers))\n  // TODO: UI上でformatを変更できるようにする\n  tokenData.setOutputFormat = CONFIG.outputFormat\n  const outputData = tokenData.output()\n\n  // Dialog\n  const dialogButtons = [\n    {\n      text: 'Copy',\n      action: () => {\n        pasteBoardWrite(\n          {\n            data: outputData,\n            message: 'Copied',\n          },\n          context\n        )\n      },\n    },\n    {\n      text: 'Save as',\n      action: () => {\n        openPanel(filePath => {\n          writeToFile(\n            `${filePath}/color.${CONFIG.outputFormat}`,\n            `${outputData}`\n          )\n        })\n      },\n    },\n    {\n      text: 'Close',\n    },\n  ]\n\n  createDialog({\n    title: 'DesignTokens2Code',\n    message: outputData,\n    buttons: dialogButtons,\n  })\n}\n","module.exports.createDialog = ({ title, message, buttons }) => {\n  if (title === undefined || message === undefined) {\n    throw new Error('\"title\" or \"message\" is no arguments.')\n  }\n\n  const dialog = NSAlert.alloc().init()\n  dialog.messageText = title\n  dialog.informativeText = message\n\n  if (buttons !== undefined && !Array.isArray(buttons)) {\n    throw new TypeError('\"buttons\" must be Array.')\n  } else if (buttons.length > 0) {\n    buttons.forEach(button => {\n      dialog.addButtonWithTitle(button.text)\n    })\n  }\n\n  // https://github.com/skpm/dialog/blob/master/lib/message-box.js#L96\n  const response = Number(dialog.runModal()) - 1000\n\n  if (\n    buttons[response].action &&\n    typeof buttons[response].action === 'function'\n  ) {\n    buttons[response].action()\n  }\n}\n\nmodule.exports.openPanel = callback => {\n  const panel = NSOpenPanel.openPanel()\n  panel.canChooseDirectories = true\n  panel.canCreateDirectories = true\n  panel.allowsMultipleSelection = false\n\n  const clicked = panel.runModal()\n\n  if (clicked === NSFileHandlingPanelOKButton) {\n    const firstURL = panel.URL().path()\n    let filePath = NSString.stringWithFormat('%@', firstURL)\n\n    if (filePath.indexOf('file://') === 0) {\n      filePath = filePath.substring(7)\n    }\n\n    callback.bind(this, filePath)()\n  }\n}\n","const sketch = require('sketch/dom')\n\nmodule.exports.pasteBoardWrite = ({ data, message = 'Copied' }, context) => {\n  if (data === undefined) {\n    throw new Error('\"data\" is not exist')\n  }\n\n  if (context.document.type === 'Document') {\n    throw new TypeError('\"context\" must be Sketch/dom')\n  }\n\n  const pasteBoard = NSPasteboard.generalPasteboard()\n  pasteBoard.clearContents()\n  pasteBoard.writeObjects([data])\n\n  context.document.showMessage(message)\n}\n\nmodule.exports.getTokenLayersByPattern = (layers, pattern) =>\n  // TODO: layerのtypeが正しいかtest追加する\n  layers.filter(\n    elm =>\n      pattern.test(elm.name) &&\n      (elm.type === `${sketch.Types.ShapePath}` ||\n        elm.type === `${sketch.Types.SymbolInstance}`)\n  )\n\n// TODO: Symbolからcolorを取得するする\n// 関数の記述場所を要検討\nmodule.exports.getSymbolMaster = layer => {\n  if (layer.type === `${sketch.Types.SymbolMaster}`) {\n    return layer\n  }\n\n  if (layer.type === `${sketch.Types.SymbolInstance}`) {\n    return layer.master\n  }\n\n  return null\n}\n\nmodule.exports.convertLayersToTokenData = layers =>\n  layers.map(elm => ({\n    type: 'color',\n    name: elm.name,\n    value: elm.style.fills[0].color,\n  }))\n\nmodule.exports.writeToFile = (path, content) => {\n  const file = NSString.stringWithFormat('%@', content)\n  return file.writeToFile_atomically(path, true)\n}\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\nmodule.exports.escapeRegExp = string =>\n  string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // $& means the whole matched string\n","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}