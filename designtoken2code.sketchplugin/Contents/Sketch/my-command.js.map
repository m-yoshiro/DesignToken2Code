{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/config.js","webpack://exports/./src/core/design-tokens.js","webpack://exports/./src/core/token.js","webpack://exports/./src/my-command.js","webpack://exports/./src/sketch-ui/index.js","webpack://exports/./src/utils.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\""],"names":["module","exports","prefix","artboardName","Token","data","config","outputFormat","tokens","initTokens","Array","isArray","TypeError","map","element","outputData","token","toScss","join","toCss","format","tokenProps","type","name","value","validate","Object","keys","forEach","key","ReferenceError","replace","sketch","UI","escapeRegExp","DesignTokens","createDialog","pasteBoardWrite","getTokenLayersByPattern","convertLayersToTokenData","writeToFile","openPanel","CONFIG","context","document","fromNative","tokensArtboard","getLayersNamed","tokenNamePattern","RegExp","layers","length","message","tokenLayers","log","Types","Shape","tokenData","setOutputFormat","output","dialogButtons","text","action","filePath","title","buttons","undefined","Error","dialog","NSAlert","alloc","init","messageText","informativeText","button","addButtonWithTitle","response","Number","runModal","pasteBoard","NSPasteboard","generalPasteboard","clearContents","writeObjects","showMessage","pattern","filter","elm","ShapePath","test","style","fills","color","path","content","file","NSString","stringWithFormat","writeToFile_atomically","callback","panel","NSOpenPanel","canChooseDirectories","canCreateDirectories","allowsMultipleSelection","clicked","NSFileHandlingPanelOKButton","firstURL","URL","indexOf","substring","bind","string"],"mappings":"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","file":"my-command.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/my-command.js\");\n","module.exports = {\n  prefix: '$color',\n  artboardName: 'Tokens',\n}\n","const Token = require('./token')\n\nmodule.exports = class DesignTokens {\n  constructor(\n    data,\n    config = {\n      outputFormat: 'scss',\n    }\n  ) {\n    this.tokens = []\n    this.config = config\n    this.initTokens(data)\n  }\n\n  initTokens(data) {\n    if (!Array.isArray(data)) {\n      return new TypeError('\"data must be Array\"')\n    }\n    this.tokens = data.map(element => new Token(element))\n\n    return null\n  }\n\n  set setOutputFormat(format) {\n    this.config.outputFormat = format\n  }\n\n  output() {\n    const { outputFormat } = this.config\n    let outputData\n\n    switch (outputFormat) {\n      case 'scss':\n        outputData = this.tokens.map(token => token.toScss()).join('\\n')\n        break\n      case 'css':\n        outputData = this.tokens.map(token => token.toCss()).join('\\n')\n        break\n      default:\n        break\n    }\n\n    return outputData\n  }\n}\n","const tokenProps = {\n  type: {\n    type: 'string',\n  },\n  name: {\n    type: 'string',\n  },\n  value: {\n    type: 'string',\n  },\n}\n\nmodule.exports = class Token {\n  constructor(data) {\n    this.data = data\n    this.validate()\n  }\n\n  validate() {\n    Object.keys(tokenProps).forEach(key => {\n      if (!(key in this.data)) {\n        throw new ReferenceError(`Data must have ${key} property.`)\n      }\n\n      if (typeof this.data[key] !== 'string') {\n        throw new TypeError(`${key} must be ${tokenProps[key].type}`)\n      }\n    })\n  }\n\n  toScss() {\n    let { name } = this.data\n    const { value } = this.data\n    name = `$${name.replace(/^\\$?(.*)/, '$1')}`\n    return `${name}: ${value} !default;`\n  }\n\n  toCss() {\n    let { name } = this.data\n    const { value } = this.data\n    name = `--${name.replace(/^\\$?(.*)/, '$1')}`\n    return `${name}: ${value};`\n  }\n}\n","const sketch = require('sketch/dom')\nconst { UI } = require('sketch')\nconst { prefix, artboardName } = require('./config')\nconst { escapeRegExp } = require('./utils')\nconst DesignTokens = require('./core/design-tokens')\nconst {\n  createDialog,\n  pasteBoardWrite,\n  getTokenLayersByPattern,\n  convertLayersToTokenData,\n  writeToFile,\n  openPanel,\n} = require('./sketch-ui/index')\n\nconst CONFIG = {\n  outputFormat: 'scss',\n}\n\nexport default function(context) {\n  const document = sketch.fromNative(context.document)\n  const tokensArtboard = document.getLayersNamed(artboardName)[0]\n  const tokenNamePattern = new RegExp(`${escapeRegExp(prefix)}`)\n\n  if (!tokensArtboard.layers.length) {\n    UI.message('Not found')\n    return\n  }\n\n  const tokenLayers = getTokenLayersByPattern(\n    tokensArtboard.layers,\n    tokenNamePattern\n  )\n\n  log(`${sketch.Types.Shape}`)\n\n  const tokenData = new DesignTokens(convertLayersToTokenData(tokenLayers))\n  // TODO: UI上でformatを変更できるようにする\n  tokenData.setOutputFormat = CONFIG.outputFormat\n  const outputData = tokenData.output()\n\n  // Dialog\n  const dialogButtons = [\n    {\n      text: 'Copy',\n      action: () => {\n        pasteBoardWrite(\n          {\n            data: outputData,\n            message: 'Copied',\n          },\n          context\n        )\n      },\n    },\n    {\n      text: 'Save as',\n      action: () => {\n        openPanel(filePath => {\n          writeToFile(\n            `${filePath}/color.${CONFIG.outputFormat}`,\n            `${outputData}`\n          )\n        })\n      },\n    },\n    {\n      text: 'Close',\n    },\n  ]\n\n  createDialog({\n    title: 'DesignTokens2Code',\n    message: outputData,\n    buttons: dialogButtons,\n  })\n}\n","const sketch = require('sketch/dom')\n\nmodule.exports.createDialog = ({ title, message, buttons }) => {\n  if (title === undefined || message === undefined) {\n    throw new Error('\"title\" or \"message\" is no arguments.')\n  }\n\n  const dialog = NSAlert.alloc().init()\n  dialog.messageText = title\n  dialog.informativeText = message\n\n  if (buttons !== undefined && !Array.isArray(buttons)) {\n    throw new TypeError('\"buttons\" must be Array.')\n  } else if (buttons.length > 0) {\n    buttons.forEach(button => {\n      dialog.addButtonWithTitle(button.text)\n    })\n  }\n\n  // https://github.com/skpm/dialog/blob/master/lib/message-box.js#L96\n  const response = Number(dialog.runModal()) - 1000\n\n  if (\n    buttons[response].action &&\n    typeof buttons[response].action === 'function'\n  ) {\n    buttons[response].action()\n  }\n}\n\nmodule.exports.pasteBoardWrite = ({ data, message = 'Copied' }, context) => {\n  if (data === undefined) {\n    throw new Error('\"data\" is not exist')\n  }\n\n  if (context.document.type === 'Document') {\n    throw new TypeError('\"context\" must be Sketch/dom')\n  }\n\n  const pasteBoard = NSPasteboard.generalPasteboard()\n  pasteBoard.clearContents()\n  pasteBoard.writeObjects([data])\n\n  context.document.showMessage(message)\n}\n\nmodule.exports.getTokenLayersByPattern = (layers, pattern) =>\n  // TODO: layerのtypeが正しいかtest追加する\n  layers.filter(\n    elm => elm.type === `${sketch.Types.ShapePath}` && pattern.test(elm.name)\n  )\n\nmodule.exports.convertLayersToTokenData = layers =>\n  layers.map(elm => ({\n    type: 'color',\n    name: elm.name,\n    value: elm.style.fills[0].color,\n  }))\n\nmodule.exports.writeToFile = (path, content) => {\n  const file = NSString.stringWithFormat('%@', content)\n  return file.writeToFile_atomically(path, true)\n}\n\nmodule.exports.openPanel = callback => {\n  const panel = NSOpenPanel.openPanel()\n  panel.canChooseDirectories = true\n  panel.canCreateDirectories = true\n  panel.allowsMultipleSelection = false\n\n  const clicked = panel.runModal()\n\n  if (clicked === NSFileHandlingPanelOKButton) {\n    const firstURL = panel.URL().path()\n    let filePath = NSString.stringWithFormat('%@', firstURL)\n\n    if (filePath.indexOf('file://') === 0) {\n      filePath = filePath.substring(7)\n    }\n\n    callback.bind(this, filePath)()\n  }\n}\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\nmodule.exports.escapeRegExp = string =>\n  string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // $& means the whole matched string\n","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}