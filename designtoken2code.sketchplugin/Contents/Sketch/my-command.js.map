{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/config.js","webpack://exports/./src/core/design-tokens.js","webpack://exports/./src/core/token.js","webpack://exports/./src/my-command.js","webpack://exports/./src/ui/index.js","webpack://exports/./src/utils.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\""],"names":["module","exports","prefix","artboardName","Token","data","config","outputFormat","tokens","initTokens","Array","isArray","TypeError","map","element","outputData","token","toScss","join","toCss","format","tokenProps","type","name","value","validate","Object","keys","forEach","key","ReferenceError","replace","sketch","UI","escapeRegExp","createDialog","pasteBoardWrite","DesignTokens","getTokenLayersByPattern","layers","pattern","filter","elm","Types","Shape","test","convertLayersToTokenData","style","fills","color","context","document","fromNative","tokensArtboard","getLayersNamed","tokenNamePattern","RegExp","length","message","tokenLayers","tokenData","setOutputFormat","output","dialogButtons","text","action","title","buttons","undefined","Error","dialog","NSAlert","alloc","init","messageText","informativeText","button","addButtonWithTitle","response","Number","runModal","pasteBoard","NSPasteboard","generalPasteboard","clearContents","writeObjects","showMessage","string"],"mappings":"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","file":"my-command.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/my-command.js\");\n","module.exports = {\n  prefix: '$color',\n  artboardName: 'Tokens',\n}\n","const Token = require('./token')\n\nmodule.exports = class DesignTokens {\n  constructor(\n    data,\n    config = {\n      outputFormat: 'scss',\n    }\n  ) {\n    this.tokens = []\n    this.config = config\n    this.initTokens(data)\n  }\n\n  initTokens(data) {\n    if (!Array.isArray(data)) {\n      return new TypeError('\"data must be Array\"')\n    }\n    this.tokens = data.map(element => new Token(element))\n\n    return null\n  }\n\n  set setOutputFormat(format) {\n    this.config.outputFormat = format\n  }\n\n  output() {\n    const { outputFormat } = this.config\n    let outputData\n\n    switch (outputFormat) {\n      case 'scss':\n        outputData = this.tokens.map(token => token.toScss()).join('\\n')\n        break\n      case 'css':\n        outputData = this.tokens.map(token => token.toCss()).join('\\n')\n        break\n      default:\n        break\n    }\n\n    return outputData\n  }\n}\n","const tokenProps = {\n  type: {\n    type: 'string',\n  },\n  name: {\n    type: 'string',\n  },\n  value: {\n    type: 'string',\n  },\n}\n\nmodule.exports = class Token {\n  constructor(data) {\n    this.data = data\n    this.validate()\n  }\n\n  validate() {\n    Object.keys(tokenProps).forEach(key => {\n      if (!(key in this.data)) {\n        throw new ReferenceError(`Data must have ${key} property.`)\n      }\n\n      if (typeof this.data[key] !== 'string') {\n        throw new TypeError(`${key} must be ${tokenProps[key].type}`)\n      }\n    })\n  }\n\n  toScss() {\n    let { name } = this.data\n    const { value } = this.data\n    name = `$${name.replace(/^\\$?(.*)/, '$1')}`\n    return `${name}: ${value} !default;`\n  }\n\n  toCss() {\n    let { name } = this.data\n    const { value } = this.data\n    name = `--${name.replace(/^\\$?(.*)/, '$1')}`\n    return `${name}: ${value};`\n  }\n}\n","const sketch = require('sketch/dom')\nconst { UI } = require('sketch')\nconst { prefix, artboardName } = require('./config')\nconst { escapeRegExp } = require('./utils')\nconst { createDialog, pasteBoardWrite } = require('./ui/index')\nconst DesignTokens = require('./core/design-tokens')\n\nconst getTokenLayersByPattern = (layers, pattern) =>\n  layers.filter(\n    elm => elm.type === `${sketch.Types.Shape}` && pattern.test(elm.name)\n  )\n\nconst convertLayersToTokenData = layers =>\n  layers.map(elm => ({\n    type: 'color',\n    name: elm.name,\n    value: elm.style.fills[0].color,\n  }))\n\nexport default function(context) {\n  const document = sketch.fromNative(context.document)\n  const tokensArtboard = document.getLayersNamed(artboardName)[0]\n  const tokenNamePattern = new RegExp(`${escapeRegExp(prefix)}`)\n\n  if (!tokensArtboard.layers.length) {\n    UI.message('Not found')\n    return\n  }\n\n  const tokenLayers = getTokenLayersByPattern(\n    tokensArtboard.layers,\n    tokenNamePattern\n  )\n\n  const tokenData = new DesignTokens(convertLayersToTokenData(tokenLayers))\n  tokenData.setOutputFormat = 'css'\n  const outputData = tokenData.output()\n\n  // Dialog\n  const dialogButtons = [\n    {\n      text: 'Copy',\n      action: () => {\n        pasteBoardWrite(\n          {\n            data: outputData,\n            message: 'Copied',\n          },\n          context\n        )\n      },\n    },\n    {\n      text: 'Close',\n    },\n  ]\n\n  createDialog({\n    title: 'DesignTokens2Code',\n    message: outputData,\n    buttons: dialogButtons,\n  })\n}\n","module.exports.createDialog = ({ title, message, buttons }) => {\n  if (title === undefined || message === undefined) {\n    throw new Error('\"title\" or \"message\" is no arguments.')\n  }\n\n  const dialog = NSAlert.alloc().init()\n  dialog.messageText = title\n  dialog.informativeText = message\n\n  if (buttons !== undefined && !Array.isArray(buttons)) {\n    throw new TypeError('\"buttons\" must be Array.')\n  } else if (buttons.length > 0) {\n    buttons.forEach(button => {\n      dialog.addButtonWithTitle(button.text)\n    })\n  }\n\n  // https://github.com/skpm/dialog/blob/master/lib/message-box.js#L96\n  const response = Number(dialog.runModal()) - 1000\n\n  if (\n    buttons[response].action &&\n    typeof buttons[response].action === 'function'\n  ) {\n    buttons[response].action()\n  }\n}\n\nmodule.exports.pasteBoardWrite = ({ data, message = 'Copied' }, context) => {\n  if (data === undefined) {\n    throw new Error('\"data\" is not exist')\n  }\n\n  if (context.document.type === 'Document') {\n    throw new TypeError('\"context\" must be Sketch/dom')\n  }\n\n  const pasteBoard = NSPasteboard.generalPasteboard()\n  pasteBoard.clearContents()\n  pasteBoard.writeObjects([data])\n\n  context.document.showMessage(message)\n}\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\nmodule.exports.escapeRegExp = string =>\n  string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // $& means the whole matched string\n","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}