{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/config.js","webpack://exports/./src/core/color.js","webpack://exports/./src/core/design-tokens.js","webpack://exports/./src/core/token.js","webpack://exports/./src/designtoken2code.js","webpack://exports/./src/sketch-ui/index.js","webpack://exports/./src/sketch-ui/utils.js","webpack://exports/./src/utils.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\""],"names":["module","exports","prefix","artboardName","value","hexPattern","match","short","long","undefined","Token","require","data","config","outputFormat","tokens","initTokens","Array","isArray","TypeError","map","element","outputData","token","toScss","join","toCss","format","Color","tokenProps","type","name","validate","color","Object","keys","forEach","key","ReferenceError","toHEX","replace","sketch","UI","escapeRegExp","DesignTokens","createDialog","openPanel","pasteBoardWrite","extractTokenLayersByPattern","convertLayersToTokenData","writeToFile","CONFIG","context","document","fromNative","tokensArtboard","getLayersNamed","tokenNamePattern","RegExp","layers","length","message","tokenLayers","log","tokenData","setOutputFormat","output","dialogButtons","text","action","filePath","title","contentText","buttons","Error","viewWidth","viewHeight","dialog","NSAlert","alloc","init","messageText","informativeText","theTextView","NSTextView","initWithFrame","NSMakeRect","scrollView","NSScrollView","accessoryView","NSView","setString","editable","setHasVerticalScroller","setBorderType","NSBezelBorder","setDocumentView","setFlipped","setFrame","addSubview","setAccessoryView","button","addButtonWithTitle","response","Number","runModal","callback","panel","NSOpenPanel","canChooseDirectories","canCreateDirectories","allowsMultipleSelection","clicked","NSFileHandlingPanelOKButton","firstURL","URL","path","NSString","stringWithFormat","indexOf","substring","bind","tokenLayerTypes","Types","ShapePath","pasteBoard","NSPasteboard","generalPasteboard","clearContents","writeObjects","showMessage","object","pattern","recursiveSearch","test","some","style","fills","push","layer","content","file","writeToFile_atomically"],"mappings":"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","file":"designtoken2code.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/designtoken2code.js\");\n","module.exports = {\n  prefix: '$color',\n  artboardName: 'Tokens',\n}\n","/**\n * Module for SketchUI.\n * @module Color\n */\n\n/**\n * Class Color.\n */\nmodule.exports = class Color {\n  /**\n   * @param {string} value - the value of color.\n   */\n  constructor(value) {\n    this.value = value\n  }\n\n  /**\n   * @return {string} The Hex color value.\n   */\n  toHEX() {\n    // https://gist.github.com/comficker/871d378c535854c1c460f7867a191a5a#gistcomment-2615849\n    const hexPattern = /^#?(?:([0-9a-f]{3})|([0-9a-f]{6})(?:[0-9a-f]{2})?)$/i\n    const [, short, long] = this.value.match(hexPattern) || []\n\n    if (long) {\n      return `#${long}`\n    }\n\n    if (short) {\n      return `#${short}`\n    }\n\n    return undefined\n  }\n}\n","const Token = require('./token')\n\n/**\n * Class DesignTokens\n */\nmodule.exports = class DesignTokens {\n  /**\n   * @param {array} data - the data of tokens.\n   * @param {object} config - the config like a output format.\n   */\n  constructor(\n    data,\n    config = {\n      outputFormat: 'scss',\n    }\n  ) {\n    this.tokens = []\n    this.config = config\n    this.initTokens(data)\n  }\n\n  /**\n   * @param {array} data - the data of tokens.\n   * @return {null}\n   */\n  initTokens(data) {\n    if (!Array.isArray(data)) {\n      return new TypeError('\"data must be Array\"')\n    }\n    this.tokens = data.map(element => new Token(element))\n\n    return null\n  }\n\n  /**\n   * @param {string} format - the format of output data.\n   * @return {array} output data.\n   */\n  set setOutputFormat(format) {\n    this.config.outputFormat = format\n  }\n\n  output() {\n    const { outputFormat } = this.config\n    let outputData\n\n    switch (outputFormat) {\n      case 'scss':\n        outputData = this.tokens.map(token => token.toScss()).join('\\n')\n        break\n      case 'css':\n        outputData = this.tokens.map(token => token.toCss()).join('\\n')\n        break\n      default:\n        break\n    }\n\n    return outputData\n  }\n}\n","const Color = require('./color')\n\nconst tokenProps = {\n  type: {\n    type: 'string',\n  },\n  name: {\n    type: 'string',\n  },\n  value: {\n    type: 'string',\n  },\n}\n\n/**\n * Class Token\n */\nmodule.exports = class Token {\n  /**\n   * @param {array} data - the data of tokens.\n   */\n  constructor(data) {\n    this.data = data\n    this.validate()\n\n    if (this.data.type === 'color') {\n      this.color = new Color(this.data.value)\n    }\n  }\n\n  /**\n   * Validate this.data.\n   */\n  validate() {\n    Object.keys(tokenProps).forEach(key => {\n      if (!(key in this.data)) {\n        throw new ReferenceError(`Data must have ${key} property.`)\n      }\n\n      if (typeof this.data[key] !== 'string') {\n        throw new TypeError(`${key} must be ${tokenProps[key].type}`)\n      }\n    })\n  }\n\n  /**\n   * Convert to SCSS variables.\n   * @return {string} HEX Color.\n   */\n  toScss() {\n    let { name, value } = this.data\n    const { type } = this.data\n\n    value = type === 'color' ? new Color(value).toHEX() : value\n    name = `$${name.replace(/^\\$?(.*)/, '$1')}`\n    return `${name}: ${value} !default;`\n  }\n\n  /**\n   * Convert to CSS variables.\n   * @return {string} HEX Color.\n   */\n  toCss() {\n    let { name, value } = this.data\n    const { type } = this.data\n\n    value = type === 'color' ? new Color(value).toHEX() : value\n    name = `--${name.replace(/^\\$?(.*)/, '$1')}`\n    return `${name}: ${value};`\n  }\n}\n","/**\n * Main module.\n * @module DesignTokens2Code\n */\n\nconst sketch = require('sketch/dom')\nconst { UI } = require('sketch')\nconst { prefix, artboardName } = require('./config')\nconst { escapeRegExp } = require('./utils')\nconst DesignTokens = require('./core/design-tokens')\nconst { createDialog, openPanel } = require('./sketch-ui/index')\nconst {\n  pasteBoardWrite,\n  extractTokenLayersByPattern,\n  convertLayersToTokenData,\n  writeToFile,\n} = require('./sketch-ui/utils')\n\nconst CONFIG = {\n  outputFormat: 'scss',\n}\n\n/**\n * Run DesignToken2Code.\n * @param {object} context - A Script Context which contains Sketch variables.\n */\nexport default function(context) {\n  const document = sketch.fromNative(context.document)\n  const tokensArtboard = document.getLayersNamed(artboardName)[0]\n  const tokenNamePattern = new RegExp(`${escapeRegExp(prefix)}`)\n\n  if (!tokensArtboard.layers.length) {\n    UI.message('Not found')\n    return\n  }\n\n  const tokenLayers = extractTokenLayersByPattern(\n    tokensArtboard,\n    tokenNamePattern\n  )\n\n  log(tokenLayers)\n\n  const tokenData = new DesignTokens(convertLayersToTokenData(tokenLayers))\n  // TODO: UI上でformatを変更できるようにする\n  // 現在はSCSSに固定している\n  tokenData.setOutputFormat = CONFIG.outputFormat\n  const outputData = tokenData.output()\n\n  // Dialog\n  const dialogButtons = [\n    {\n      text: 'Copy',\n      action: () => {\n        pasteBoardWrite(\n          {\n            data: outputData,\n            message: 'Copied',\n          },\n          context\n        )\n      },\n    },\n    {\n      text: 'Save as',\n      action: () => {\n        openPanel(filePath => {\n          writeToFile(\n            `${filePath}/color.${CONFIG.outputFormat}`,\n            `${outputData}`\n          )\n        })\n      },\n    },\n    {\n      text: 'Close',\n    },\n  ]\n\n  createDialog({\n    title: 'DesignTokens2Code',\n    contentText: outputData,\n    buttons: dialogButtons,\n  })\n}\n","/**\n * Module for SketchUI.\n * @module SketchUI\n */\n\n/**\n * Create Dialog.\n * @param {string} title - the title of the dialog\n * @param {string} message - the message of the dialog by using informativeText.\n * @param {string} contentText - the contentText\n * @param {array} buttons - the buttons of the dialog.\n */\nmodule.exports.createDialog = ({ title, message, contentText, buttons }) => {\n  if (\n    title === undefined ||\n    (message === undefined && contentText === undefined)\n  ) {\n    throw new Error('\"title\" or \"message\" is no arguments.')\n  }\n\n  // Content View sizes\n  const viewWidth = 350\n  const viewHeight = 300\n\n  const dialog = NSAlert.alloc().init()\n  dialog.messageText = title\n\n  if (message) {\n    dialog.informativeText = message\n  }\n\n  if (contentText) {\n    const theTextView = NSTextView.alloc().initWithFrame(\n      NSMakeRect(0, 0, viewWidth, viewHeight)\n    )\n    const scrollView = NSScrollView.alloc().initWithFrame(\n      NSMakeRect(0, 0, viewWidth, viewHeight - 30)\n    )\n    const accessoryView = NSView.alloc().init()\n\n    // Insert contentText\n    theTextView.setString(contentText)\n    theTextView.editable = false\n\n    // Put contentText into scrollView\n    scrollView.setHasVerticalScroller(true)\n    scrollView.setBorderType(NSBezelBorder)\n    scrollView.setDocumentView(theTextView)\n\n    // Put scrollView into accessoryView\n    accessoryView.setFlipped(true)\n    accessoryView.setFrame(NSMakeRect(0, 0, viewWidth, viewHeight))\n    accessoryView.addSubview(scrollView)\n\n    dialog.setAccessoryView(scrollView)\n  }\n\n  if (buttons !== undefined && !Array.isArray(buttons)) {\n    throw new TypeError('\"buttons\" must be Array.')\n  } else if (buttons.length > 0) {\n    buttons.forEach(button => {\n      dialog.addButtonWithTitle(button.text)\n    })\n  }\n\n  // https://github.com/skpm/dialog/blob/master/lib/message-box.js#L96\n  const response = Number(dialog.runModal()) - 1000\n\n  if (\n    buttons[response].action &&\n    typeof buttons[response].action === 'function'\n  ) {\n    buttons[response].action()\n  }\n}\n\n/**\n * Open Panel.\n * @param {function} callback - Callback will run after opening panel.\n */\nmodule.exports.openPanel = callback => {\n  const panel = NSOpenPanel.openPanel()\n  panel.canChooseDirectories = true\n  panel.canCreateDirectories = true\n  panel.allowsMultipleSelection = false\n\n  const clicked = panel.runModal()\n\n  if (clicked === NSFileHandlingPanelOKButton) {\n    const firstURL = panel.URL().path()\n    let filePath = NSString.stringWithFormat('%@', firstURL)\n\n    if (filePath.indexOf('file://') === 0) {\n      filePath = filePath.substring(7)\n    }\n\n    callback.bind(this, filePath)()\n  }\n}\n","/**\n * Module for SketchUI.\n * @module SketchUI/utils\n */\n\n/* eslint-disable consistent-return */\nconst sketch = require('sketch/dom')\n// Tokenとして扱うことのできる Layer Typeを指定\nconst tokenLayerTypes = [`${sketch.Types.ShapePath}`]\n\nmodule.exports.pasteBoardWrite = ({ data, message = 'Copied' }, context) => {\n  if (data === undefined) {\n    throw new Error('\"data\" is not exist')\n  }\n\n  if (context.document.type === 'Document') {\n    throw new TypeError('\"context\" must be Sketch/dom')\n  }\n\n  const pasteBoard = NSPasteboard.generalPasteboard()\n  pasteBoard.clearContents()\n  pasteBoard.writeObjects([data])\n\n  context.document.showMessage(message)\n}\n\nmodule.exports.extractTokenLayersByPattern = (object, pattern) => {\n  const tokenLayers = []\n\n  // eslint-disable-next-line no-shadow\n  const recursiveSearch = object => {\n    if (object.layers && object.layers.length) {\n      object.layers.forEach(recursiveSearch)\n    }\n\n    if (\n      pattern.test(object.name) &&\n      tokenLayerTypes.some(type => type === object.type) &&\n      object.style.fills &&\n      object.style.fills.length\n    ) {\n      tokenLayers.push(object)\n    }\n  }\n\n  recursiveSearch(object)\n\n  return tokenLayers\n}\n\nmodule.exports.convertLayersToTokenData = layers =>\n  layers.map(layer => ({\n    type: 'color',\n    name: layer.name,\n    value: layer.style.fills[0].color,\n  }))\n\nmodule.exports.writeToFile = (path, content) => {\n  const file = NSString.stringWithFormat('%@', content)\n  return file.writeToFile_atomically(path, true)\n}\n","/**\n * Utilities.\n * @module Utils\n */\n\n/**\n * Escape special characters in a variable for using RegExp.\n * See {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions}\n * @param {string} pattern - the pattern of RegExp.\n * @return {regexp} regexp escaped special characters.\n */\nmodule.exports.escapeRegExp = pattern =>\n  pattern.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // $& means the whole matched string\n","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}